# Modul: NastavenÃ­

> â„¹ï¸ Viz [Pravidla dokumentace a centrÃ¡lnÃ­ katalogy](./pravidla.md)  
> â„¹ï¸ Viz [CentrÃ¡lnÃ­ katalog tlaÄÃ­tek a ikon](./common-actions.md)  
> â„¹ï¸ Viz [CentrÃ¡lnÃ­ katalog oprÃ¡vnÄ›nÃ­](./permissions-catalog.md)

---

## ğŸŒ² StromovÃ¡ struktura modulu

| Stav | Sekce                                | Popis                                                      |
|------|--------------------------------------|------------------------------------------------------------|
| âœ…   | ğŸŸ¦ ÄŒÃ­selnÃ­ky a ÄÃ­slovÃ¡nÃ­ dokumentÅ¯    | NastavenÃ­ ÄÃ­selnÃ½ch Å™ad dokladÅ¯, obecnÃ© ÄÃ­selnÃ­ky          |
| âœ…   | ğŸŸ¦ ZÃ¡lohovÃ¡nÃ­, import a export        | ZÃ¡lohy databÃ¡ze a dokumentÅ¯, import/export dat             |
| âœ…   | ğŸŸ¦ ZobrazenÃ­ a vzhled aplikace        | BarevnÃ¡ schÃ©mata, velikost pÃ­sma, rozloÅ¾enÃ­, hlavnÃ­ panel  |
| âœ…   | ğŸŸ¦ NastavenÃ­ oblÃ­benÃ½ch (strom menu)  | UÅ¾ivatelÃ© si volÃ­ oblÃ­benÃ© sekce a poÅ™adÃ­                  |
| âœ…   | ğŸŸ¦ MobilnÃ­ zobrazenÃ­ a optimalizace   | MobilnÃ­ reÅ¾im, zjednoduÅ¡enÃ© ovlÃ¡dÃ¡nÃ­, FAB, omezenÃ­ funkcÃ­  |
| âœ…   | ğŸŸ¦ PrÃ¡va, role a audit                | SprÃ¡va oprÃ¡vnÄ›nÃ­, auditnÃ­ log zmÄ›n, historie nastavenÃ­     |
| âœ…   | ğŸŸ¦ Integrace a externÃ­ napojenÃ­       | NapojenÃ­ na ARES, SSO, externÃ­ sluÅ¾by                      |
| âœ…   | ğŸ“ PoznÃ¡mky, nÃ¡pady a Ãºkoly           | Prostor pro dalÅ¡Ã­ poznÃ¡mky a TODO                          |

---

## ğŸŸ¦ ÄŒÃ­selnÃ­ky a ÄÃ­slovÃ¡nÃ­ dokumentÅ¯

- NastavenÃ­ ÄÃ­selnÃ½ch Å™ad, prefixÅ¯, pÅ™Ã­pon, formÃ¡tÅ¯ pro vÅ¡echny typy dokladÅ¯ a entit
- ÄŒÃ­selnÃ­ky pro typy sluÅ¾eb, zaÅ™Ã­zenÃ­, kategoriÃ­, stavÅ¯, rolÃ­
- SprÃ¡va (vytvoÅ™it, editovat, deaktivovat), validace unikÃ¡tnosti, kontrola konfliktÅ¯ v ÄÃ­selnÃ© Å™adÄ›
- AutomatickÃ© generovÃ¡nÃ­ ÄÃ­sel, kontrola aktuÃ¡lnÃ­ho ÄÃ­sla, moÅ¾nost nastavovat poÄÃ¡teÄnÃ­ ÄÃ­sla

---

## ğŸŸ¦ ZÃ¡lohovÃ¡nÃ­, import a export

- ManuÃ¡lnÃ­ i automatickÃ© zÃ¡lohy databÃ¡ze, dokumentÅ¯, pÅ™Ã­loh
- Obnova dat, historie zÃ¡loh, moÅ¾nost exportu/importu vÅ¡ech uÅ¾ivatelskÃ½ch i systÃ©movÃ½ch dat (CSV, XLSX, XML)
- Validace formÃ¡tu, kontrola konzistence, moÅ¾nost mapovÃ¡nÃ­ polÃ­ pÅ™i importu
- UpozornÄ›nÃ­ na chyby pÅ™i importu/exportu, moÅ¾nost stÃ¡hnout log chyb

---

## ğŸŸ¦ ZobrazenÃ­ a vzhled aplikace

- Personalizace vzhledu: barevnÃ¡ schÃ©mata, velikost pÃ­sma, kontrast, rozloÅ¾enÃ­ panelÅ¯
- NastavenÃ­ pro jednotlivce/skupiny/globÃ¡lnÄ›
- NÃ¡hled pÅ™ed uloÅ¾enÃ­m zmÄ›n, moÅ¾nost resetu vzhledu
- SprÃ¡va zobrazenÃ½ch sekcÃ­, vÃ½bÄ›r hlavnÃ­ho panelu
- Kompatibilita s mobilnÃ­ verzÃ­

---

## ğŸŸ¦ NastavenÃ­ oblÃ­benÃ½ch (strom menu)

- Volba oblÃ­benÃ½ch sekcÃ­ a poÅ™adÃ­ (drag&drop)
- SkrÃ½vÃ¡nÃ­ nevyuÅ¾Ã­vanÃ½ch ÄÃ¡stÃ­, uklÃ¡dÃ¡nÃ­ preferencÃ­
- NastavenÃ­ pro jednotlivce i globÃ¡lnÄ› (admin mÅ¯Å¾e nastavit vÅ¡em)
- UklÃ¡dÃ¡nÃ­ preferencÃ­ do profilu uÅ¾ivatele

---

## ğŸŸ¦ MobilnÃ­ zobrazenÃ­ a optimalizace

- Optimalizace pro mobilnÃ­ zaÅ™Ã­zenÃ­, omezenÃ­ vybranÃ½ch funkcÃ­
- ZjednoduÅ¡enÃ© ovlÃ¡dÃ¡nÃ­, vÄ›tÅ¡Ã­ ovlÃ¡dacÃ­ prvky, FAB (Floating Action Button)
- VÃ½bÄ›r sekcÃ­ pro mobilnÃ­ reÅ¾im, upozornÄ›nÃ­ na omezenÃ­ funkcÃ­
- PÅ™epÃ­nÃ¡nÃ­ mezi desktop/mobile, sticky-liÅ¡ta pro hlavnÃ­ akce

---

## ğŸŸ¦ PrÃ¡va, role a audit

- SprÃ¡va rolÃ­ a oprÃ¡vnÄ›nÃ­ pro vÅ¡echny moduly a akce (napojenÃ­ na permissions-catalog)
- NastavenÃ­ u jednotlivÃ½ch uÅ¾ivatelÅ¯, skupin, globÃ¡lnÃ­ch rolÃ­
- AuditnÃ­ log zmÄ›n (kdo, kdy, co zmÄ›nil v nastavenÃ­), historie vÅ¡ech zÃ¡sahÅ¯
- MoÅ¾nost exportu auditnÃ­ historie
- UpozornÄ›nÃ­ na konflikty pÅ™i hromadnÃ½ch zmÄ›nÃ¡ch

---

## ğŸŸ¦ Integrace a externÃ­ napojenÃ­

- MoÅ¾nost napojenÃ­ na externÃ­ sprÃ¡vce identit (SSO, OAuth, Active Directory)
- Integrace na ARES (automatickÃ© doplÅˆovÃ¡nÃ­ ÃºdajÅ¯ firem, uÅ¾ivatelÅ¯)
- NastavenÃ­ notifikacÃ­ na zmÄ›ny v systÃ©mu (e-mail, SMS, internÃ­)
- MoÅ¾nost nastavenÃ­ automatickÃ½ch kontrol konzistence dat
- Export vÅ¡ech nastavenÃ­ vÄetnÄ› uÅ¾ivatelskÃ½ch preferencÃ­

---

## ğŸ“ PoznÃ¡mky, nÃ¡pady a Ãºkoly k modulu i dlaÅ¾dicÃ­m

> â³ = rozpracovÃ¡no, pÅ™eÅ¡krtni hotovÃ©. Nic nemaÅ¾eme!

- â³ PÅ™idat moÅ¾nost hromadnÃ©ho nastavenÃ­ pro skupiny uÅ¾ivatelÅ¯ (role, typ ÃºÄtu)
- â³ Implementovat logovÃ¡nÃ­ zmÄ›n v nastavenÃ­ (audit trail) a moÅ¾nost exportu auditnÃ­ historie
- â³ UmoÅ¾nit nastavenÃ­ notifikacÃ­ na zmÄ›ny v systÃ©mu (napÅ™. zmÄ›na role, novÃ½ modul, podezÅ™elÃ© nebo citlivÃ© zmÄ›ny)
- â³ Integrace s externÃ­mi sprÃ¡vci identit (SSO, OAuth, Active Directory)
- â³ MoÅ¾nost nastavenÃ­ automatickÃ½ch kontrol konzistence dat a upozornÄ›nÃ­ na nesoulad
- â³ PÅ™idat moÅ¾nost exportu/importu vÅ¡ech nastavenÃ­ vÄetnÄ› uÅ¾ivatelskÃ½ch preferencÃ­ a prÃ¡v (pro migrace/klonovÃ¡nÃ­ ÃºÄtu)
- â³ VytvoÅ™it detailnÃ­ historii zmÄ›n pro kaÅ¾dÃ© nastavenÃ­ (audit log) a moÅ¾nost filtrovat podle typu zmÄ›ny
- â³ UpozornÄ›nÃ­ na konflikty pÅ™i hromadnÃ½ch zmÄ›nÃ¡ch, moÅ¾nost nÃ¡hledu zmÄ›n pÅ™ed uloÅ¾enÃ­m
- â³ MoÅ¾nost napojenÃ­ na katalog firem (ARES) pro vÃ½bÄ›r ÃºdajÅ¯ v ÄÃ­selnÃ­cÃ­ch a kontaktech
- â³ NastavenÃ­ workflow schvalovÃ¡nÃ­ zmÄ›n v systÃ©mu (napÅ™. zmÄ›na ÄÃ­selnÃ­ku, globÃ¡lnÃ­ho vzhledu, prÃ¡v)
- â³ MoÅ¾nost resetu vÅ¡ech nastavenÃ­ na vÃ½chozÃ­ hodnoty (uÅ¾ivatel i admin)
- â³ Inline nÃ¡povÄ›da a odkazy na FAQ nebo Help modul pÅ™Ã­mo z nastavenÃ­ (tooltips, info ikonky)
- â³ Podpora vÃ­ce jazykÅ¯ (lokalizace nastavenÃ­ i celÃ© aplikace)
- â³ SprÃ¡va uÅ¾ivatelskÃ½ch Å¡ablon (napÅ™. filtry, vlastnÃ­ dashboardy, pohledy)
- â³ SprÃ¡va API klÃ­ÄÅ¯ a webhookÅ¯ pro externÃ­ integrace
- â³ SprÃ¡va datovÃ½ch limitÅ¯/kvÃ³t (pro pÅ™Ã­lohy, zÃ¡lohy, objem dat)
- â³ NastavenÃ­ GDPR (anonymizace, export osobnÃ­ch ÃºdajÅ¯, expirace dat)
- â³ NastavenÃ­ intervalÅ¯ pro automatickÃ© akce (nejen zÃ¡lohy, takÃ© expiraÄnÃ­ Äasy, TTL pro notifikace)
- â³ Vazby na dokumentaci a nÃ¡povÄ›du (inline help, odkazy na FAQ, moÅ¾nost vyhledÃ¡vÃ¡nÃ­ v Help pÅ™Ã­mo z NastavenÃ­)
- â³ MoÅ¾nost vlastnÃ­ Ãºpravy Å¡ablon notifikacÃ­ a e-mailÅ¯ pÅ™Ã­mo v nastavenÃ­

---

## ğŸ—„ï¸ DatovÃ© modely (ukÃ¡zka)

### 1. UÅ¾ivatelskÃ© preference

```json
{
  "user_id": "uzivatel123",
  "oblibene_moduly": ["platby", "ÃºdrÅ¾ba", "energie"],
  "menu_pozice": ["platby", "energie", "ÃºdrÅ¾ba", "komunikace"],
  "barva": "tmavÃ½",
  "velikost_pisma": "stÅ™ednÃ­",
  "mobilni_rezim": true
}
```

### 2. ÄŒÃ­selnÃ¡ Å™ada

```json
{
  "id": "faktura_2025",
  "modul": "faktury",
  "prefix": "FA-2025-",
  "cislo_od": 10001,
  "cislo_do": 99999,
  "aktualni_cislo": 10057,
  "format": "FA-2025-{cislo}"
}
```

### 3. NastavenÃ­ zÃ¡loh

```json
{
  "rezim": "automaticky",
  "interval": "denne",
  "umisteni": "cloud",
  "posledni_zaloha": "2025-09-09T02:00:00"
}
```

---

## âš ï¸ ChybovÃ© stavy a vÃ½jimky

| Chyba / vÃ½jimka                | Å˜eÅ¡enÃ­ systÃ©mu / reakce      | UÅ¾ivatelskÃ¡ hlÃ¡Å¡ka                              |
|---------------------------------|------------------------------|-------------------------------------------------|
| NeuloÅ¾enÃ© nastavenÃ­             | Upozornit, nabÃ­dnout uloÅ¾enÃ­ | â€ZmÄ›ny nebyly uloÅ¾eny, chcete pokraÄovat?â€œ      |
| Chyba pÅ™i importu/exportu       | DetailnÃ­ hlÃ¡Å¡ka, logovÃ¡nÃ­    | â€Import se nezdaÅ™il, zkontrolujte formÃ¡t dat.â€œ  |
| Konflikt v ÄÃ­selnÃ© Å™adÄ›         | ZabrÃ¡nit uloÅ¾enÃ­, nabÃ­dnout Å™eÅ¡enÃ­ | â€ÄŒÃ­slo jiÅ¾ existuje, upravte ÄÃ­selnou Å™adu.â€œ|
| NepodporovanÃ¡ funkce v mobilu   | VarovÃ¡nÃ­, nabÃ­dnout desktop  | â€Tato funkce je dostupnÃ¡ pouze na desktopu.â€œ    |

---

## ğŸ›¡ï¸ Role a oprÃ¡vnÄ›nÃ­

| Funkce / Akce                | Admin | PronajÃ­matel | SprÃ¡vce | NÃ¡jemnÃ­k | Pouze ÄtenÃ­ |
|------------------------------|:-----:|:------------:|:-------:|:--------:|:-----------:|
| SprÃ¡va ÄÃ­selnÃ­kÅ¯             |  âœ…   |      âœ…      |   âœ…    |    âŒ    |     âŒ      |
| NastavenÃ­ zÃ¡loh, importu     |  âœ…   |      âœ…      |   âœ…    |    âŒ    |     âŒ      |
| NastavenÃ­ vzhledu            |  âœ…   |      âœ…      |   âœ…    |    âœ…    |     âŒ      |
| Volba oblÃ­benÃ½ch             |  âœ…   |      âœ…      |   âœ…    |    âœ…    |     âŒ      |
| SprÃ¡va prÃ¡v a audit          |  âœ…   |      âœ…      |   âœ…    |    âŒ    |     âŒ      |
| Integrace s externÃ­mi systÃ©my|  âœ…   |      âœ…      |   âœ…    |    âŒ    |     âŒ      |

---

## ğŸ“‹ DoporuÄenÃ© workflow

1. **NastavenÃ­ ÄÃ­selnÃ­kÅ¯ a Å™ad:**  
   - Admin/pronajÃ­matel nastavÃ­ ÄÃ­selnÃ© Å™ady pro vÅ¡echny druhy dokumentÅ¯.
   - SystÃ©m automaticky generuje ÄÃ­sla pÅ™i tvorbÄ› novÃ½ch zÃ¡znamÅ¯.

2. **ZÃ¡lohovÃ¡nÃ­ a obnova:**  
   - NastavenÃ­ automatickÃ©ho reÅ¾imu zÃ¡loh (interval, umÃ­stÄ›nÃ­).
   - PÅ™ed obnovou systÃ©m vÅ¾dy vytvoÅ™Ã­ zÃ¡loÅ¾nÃ­ kopii aktuÃ¡lnÃ­ho stavu.

3. **Ãšprava vzhledu/oblÃ­benÃ½ch:**  
   - UÅ¾ivatel si nastavÃ­ preferovanÃ© moduly a poÅ™adÃ­, pÅ™Ã­padnÄ› vzhled aplikace.
   - V mobilu jsou vidÄ›t pouze oblÃ­benÃ© moduly/dlaÅ¾dice, ostatnÃ­ v rozbalovacÃ­m menu.

4. **Import/export:**  
   - UÅ¾ivatel nebo sprÃ¡vce pouÅ¾ije prÅ¯vodce importem/exportem, systÃ©m nabÃ­dne mapovÃ¡nÃ­ polÃ­ a kontrolu dat.

5. **Audit a prÃ¡va:**  
   - KaÅ¾dÃ¡ zmÄ›na v nastavenÃ­ je logovÃ¡na v auditnÃ­m logu, admin mÅ¯Å¾e vyhledat historii pro konkrÃ©tnÃ­ho uÅ¾ivatele, sekci Äi akci.
   - MoÅ¾nost schvÃ¡lenÃ­ zmÄ›ny (workflow) pÅ™ed platnostÃ­, upozornÄ›nÃ­ na konflikty.

6. **Integrace:**  
   - Admin nastavÃ­ propojenÃ­ na externÃ­ sluÅ¾by (ARES, SSO), nastavÃ­ pravidla pro doplÅˆovÃ¡nÃ­ ÃºdajÅ¯, pÅ™Ã­padnÄ› povolÃ­ uÅ¾ivatelÅ¯m napojenÃ­ svÃ½ch firemnÃ­ch identit.

7. **NÃ¡povÄ›da a lokalizace:**  
   - UÅ¾ivatel mÅ¯Å¾e z nastavenÃ­ spustit inline nÃ¡povÄ›du nebo pÅ™ejÃ­t do modulu Help.
   - MoÅ¾nost pÅ™epÃ­nÃ¡nÃ­ jazykÅ¯ a Ãºpravy nÄ›kterÃ½ch Å¡ablon pÅ™Ã­mo v nastavenÃ­.

---

## ğŸ“š Reference

- [Modul Komunikace](./komunikace.md)
- [Modul Platby](./platby.md)
- [Modul ÃšdrÅ¾ba](./udrzba.md)
- [Modul Energie](./energie.md)

---

ğŸ“± **Rady k nastavenÃ­ pro telefony:**  
Omezit poÄet â€viditelnÃ½châ€œ modulÅ¯ na hlavnÃ­ obrazovce:  
V mobilnÃ­ verzi nabÃ­dnÄ›te pouze nejÄastÄ›ji pouÅ¾Ã­vanÃ© (Platby, ÃšdrÅ¾ba, Komunikace). OstatnÃ­ skryjte do menu.  
PouÅ¾Ã­t tzv. â€bottom navigationâ€œ (spodnÃ­ liÅ¡ta s 3â€“5 nejdÅ¯leÅ¾itÄ›jÅ¡Ã­mi ikonami), zbytek v hamburger menu.  
Zajistit â€stickyâ€œ (vÅ¾dy viditelnou) moÅ¾nost nÃ¡vratu na hlavnÃ­ panel nebo rychlou akci (napÅ™. + pro novÃ½ poÅ¾adavek/platbu).  
DÅ¯leÅ¾itÃ© akce (napÅ™. nahlÃ¡sit zÃ¡vadu, odeslat platbu) umÃ­stit na jedno kliknutÃ­ z hlavnÃ­ obrazovky.  
MoÅ¾nost rychle pÅ™epnout mezi ÃºÄty, jednotkami, nemovitostmi.  
Testovat na rÅ¯znÃ½ch zaÅ™Ã­zenÃ­ch (iOS, Android, rÅ¯znÃ© rozliÅ¡enÃ­) â€“ kritickÃ© je, aby se nic neztrÃ¡celo a menu bylo intuitivnÃ­.

---

> Modul NastavenÃ­ zajiÅ¡Å¥uje sprÃ¡vu systÃ©movÃ½ch parametrÅ¯, usnadÅˆuje prÃ¡ci uÅ¾ivatelÅ¯m a umoÅ¾Åˆuje personalizovat aplikaci na mÃ­ru, vÄetnÄ› optimalizace pro telefony a tablety. Pokud budeÅ¡ chtÃ­t detailnÄ›jÅ¡Ã­ schÃ©mata prÃ¡v, workflow nebo integrace, napiÅ¡!
