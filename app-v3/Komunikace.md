> ‚ÑπÔ∏è Viz [Pravidla dokumentace a centr√°ln√≠ katalogy](./pravidla.md)

# Modul: Komunikace

---

## Stromov√° struktura modulu

| Stav | Sekce | Popis |
|------|-------|-------|
| ‚úÖ   | üü¶ P≈ôehled komunikace | Historie odeslan√Ωch a p≈ôijat√Ωch zpr√°v |
| ‚úÖ   | üü¶ Detail zpr√°vy | N√°hled, odpovƒõƒè, archivace             |
| ‚úÖ   | üü¶ ≈†ablony a automatizace zpr√°v | Spr√°va ≈°ablon, automatick√© notifikace  |
| ‚úÖ   | üü¶ Odes√≠l√°n√≠ zpr√°v | Ruƒçn√≠ i hromadn√© odes√≠l√°n√≠, p≈ô√≠lohy    |
| ‚úÖ   | üü¶ Nastaven√≠ a integrace | SMTP, SMS br√°na, notifikaƒçn√≠ preference|
| ‚úÖ   | üóíÔ∏è Pozn√°mky, n√°pady a √∫koly | Prostor pro dal≈°√≠ pozn√°mky a TODO       |

---

## üü¶ P≈ôehled komunikace

### ‚úÖ Checklist pro dokumentaci sekce/dla≈ædice a formul√°≈ôe
- ‚úÖ √öƒçel, u≈æivatel√©, pole, filtrov√°n√≠, vyhled√°v√°n√≠
- ‚úÖ Historie komunikace s konkr√©tn√≠m subjektem
- ‚úÖ Filtrov√°n√≠ podle typu, adres√°ta, obdob√≠, modulu
- ‚úÖ Export, archivace zpr√°v

---

## üü¶ Detail zpr√°vy

### ‚úÖ Checklist pro dokumentaci sekce/dla≈ædice a formul√°≈ôe
- ‚úÖ N√°hled, obsah, p≈ô√≠lohy, stav doruƒçen√≠/ƒçten√≠
- ‚úÖ Mo≈ænost odpovƒõdi, p≈ôeposl√°n√≠, archivace
- ‚úÖ Historie komunikace s jednotkou/n√°jemn√≠kem

---

## üü¶ ≈†ablony a automatizace zpr√°v

### ‚úÖ Checklist pro dokumentaci sekce/dla≈ædice a formul√°≈ôe
- ‚úÖ Spr√°va ≈°ablon pro r≈Øzn√© sc√©n√°≈ôe, promƒõnn√©
- ‚úÖ Automatick√© notifikace, p≈ôi≈ôazen√≠ workflow
- ‚úÖ Historie odeslan√Ωch automatick√Ωch zpr√°v

---

## üü¶ Odes√≠l√°n√≠ zpr√°v

### ‚úÖ Checklist pro dokumentaci sekce/dla≈ædice a formul√°≈ôe
- ‚úÖ Ruƒçn√≠ i hromadn√© odes√≠l√°n√≠ (e-mail, SMS, intern√≠ zpr√°va)
- ‚úÖ V√Ωbƒõr p≈ô√≠jemce, p≈ôid√°n√≠ p≈ô√≠loh, v√Ωbƒõr ≈°ablony
- ‚úÖ Ovƒõ≈ôen√≠ p≈ô√≠jemce, chybov√© stavy

---

## üü¶ Nastaven√≠ a integrace

### ‚úÖ Checklist pro dokumentaci sekce/dla≈ædice a formul√°≈ôe
- ‚úÖ Nastaven√≠ SMTP, IMAP, SMS br√°ny
- ‚úÖ Spr√°va notifikaƒçn√≠ch preferenc√≠, pr√°v pro odes√≠l√°n√≠

---

## üóíÔ∏è Pozn√°mky, n√°pady a √∫koly k modulu i dla≈ædic√≠m

> Sem pi≈° v≈°e, co je pot≈ôeba doplnit, zmƒõnit nebo vy≈ôe≈°it.  
> ‚è≥ = rozpracov√°no, p≈ôe≈°krtni hotov√©.

- ‚è≥ Pln√° integrace p≈ô√≠jmu e-mail≈Ø (IMAP synchronizace)
- ‚è≥ Automatick√© p√°rov√°n√≠ p≈ô√≠choz√≠ komunikace s entitami v syst√©mu
- ‚è≥ Odes√≠l√°n√≠ SMS p≈ôes v√≠ce poskytovatel≈Ø (fallback)
- ‚è≥ Nastaven√≠ skupinov√Ωch notifikac√≠ (nap≈ô. pouze vybran√Ωm spr√°vc≈Øm)
- ‚è≥ Mo≈ænost pl√°novan√©ho odes√≠l√°n√≠ (nap≈ô. rozeslat v budouc√≠m term√≠nu)
- ‚è≥ Export a archivace cel√© historie komunikace pro audit
- ‚è≥ Automatizovan√© ≈°ablony pro v≈°echny ud√°losti v syst√©mu
- ‚è≥ Mo≈ænost napojen√≠ na extern√≠ helpdesk/ticketing syst√©m

> Ot√°zky k doplnƒõn√≠:
> - Budeme podporovat p≈ô√≠jem odpovƒõd√≠ z e-mailu a jejich automatick√© zpracov√°n√≠?
> - Chceme umo≈ænit nastaven√≠ ≈°ablon pro ka≈ædou ud√°lost v syst√©mu individu√°lnƒõ?
> - M√° b√Ωt mo≈æn√© dohledat komunikaci nap≈ô√≠ƒç v≈°emi moduly jedn√≠m hled√°n√≠m?
> - Umo≈æn√≠me u≈æivatelskou spr√°vu podpisu a hlaviƒçky zpr√°vy?
> - Chceme podporovat ≈°ifrov√°n√≠/PGP pro e-maily?

---

## üóÉÔ∏è Datov√© modely (uk√°zka)

```json
{
  "id": "msg_20250909_01",
  "typ": "email",
  "odesilatel": "spravce@domena.cz",
  "prijemce": "najemnik1@email.cz",
  "predmet": "Upom√≠nka platby",
  "obsah": "V√°≈æen√Ω pane, evidujeme neuhrazenou platbu...",
  "prilohy": ["predpis_platby.pdf"],
  "odeslano": "2025-09-09T13:10:00",
  "stav": "odeslano",
  "modul": "platby"
}
```
```json
{
  "id": "template_upominka",
  "typ": "upominka",
  "predmet": "Upom√≠nka platby za obdob√≠ {{obdobi}}",
  "obsah": "V√°≈æen√Ω/√° {{jmeno}}, evidujeme k {{datum}} neuhrazenou platbu ve v√Ω≈°i {{castka}}...",
  "modul": "platby"
}
```

---

## ‚ö†Ô∏è Chybov√© stavy a v√Ωjimky

| Chyba / v√Ωjimka                | ≈òe≈°en√≠ syst√©mu / reakce      | U≈æivatelsk√° hl√°≈°ka                              |
|---------------------------------|------------------------------|-------------------------------------------------|
| Neodeslan√° zpr√°va (chyba SMTP)  | Upozornit, mo≈ænost opakovat  | ‚ÄûZpr√°vu se nepoda≈ôilo odeslat, zkuste znovu.‚Äú   |
| SMS br√°na nedostupn√°            | Upozornit, logovat           | ‚ÄûSMS br√°na nen√≠ dostupn√°, zpr√°va nebyla odesl√°na.‚Äú|
| Duplicitn√≠ odesl√°n√≠             | Upozornit, zabr√°nit          | ‚ÄûTato zpr√°va ji≈æ byla odesl√°na.‚Äú                |
| Chybƒõj√≠c√≠ p≈ô√≠jemce              | Zabr√°nit odesl√°n√≠            | ‚ÄûMus√≠te zadat p≈ô√≠jemce zpr√°vy.‚Äú                 |

---

## üõ°Ô∏è Role a opr√°vnƒõn√≠

| Funkce / Akce                | Pronaj√≠matel | Spr√°vce | √öƒçetn√≠ | N√°jemn√≠k | Pouze ƒçten√≠ |
|------------------------------|:------------:|:-------:|:------:|:--------:|:-----------:|
| Odesl√°n√≠ zpr√°vy              |      ‚úÖ      |   ‚úÖ    |   ‚úÖ   |    ‚ùå    |     ‚ùå      |
| Vytvo≈ôen√≠/√∫prava ≈°ablony     |      ‚úÖ      |   ‚úÖ    |   ‚úÖ   |    ‚ùå    |     ‚ùå      |
| Prohl√≠≈æen√≠ komunikace        |      ‚úÖ      |   ‚úÖ    |   ‚úÖ   |    ‚úÖ    |     ‚úÖ      |
| Hromadn√© rozes√≠l√°n√≠          |      ‚úÖ      |   ‚úÖ    |   ‚úÖ   |    ‚ùå    |     ‚ùå      |

---

## üìë Doporuƒçen√© workflow

1. Odesl√°n√≠ automatizovan√© zpr√°vy ‚Üí modul (nap≈ô. Platby) vygeneruje ud√°lost ‚Üí pou≈æije ≈°ablonu ‚Üí ode≈°le zpr√°vu ‚Üí ulo≈æ√≠ do historie.
2. Manu√°ln√≠ odesl√°n√≠ zpr√°vy ‚Üí v√Ωbƒõr p≈ô√≠jemce/≈°ablony ‚Üí odesl√°n√≠ ‚Üí evidence v historii.
3. P≈ôijet√≠ odpovƒõdi (pokud je podporov√°no) ‚Üí p≈ôi≈ôazen√≠ k modulu ‚Üí mo≈ænost reakce.
4. Spr√°va ≈°ablon ‚Üí tvorba/√∫prava sc√©n√°≈ô≈Ø pro automatizaci.
5. Reporting komunikace ‚Üí p≈ôehled odeslan√Ωch zpr√°v, √∫spƒõ≈°nosti doruƒçen√≠, historie podle subjektu.

---

## üìö Reference

- [Modul Platby](./platby.md)
- [Modul √ödr≈æba](./udrzba.md)
- [Modul Slu≈æby](./sluzby.md)
- [Modul Jednotka](./jednotka.md)

---

> Modul Komunikace zaji≈°≈•uje p≈ôehledn√© a bezpeƒçn√© uchov√°v√°n√≠ ve≈°ker√© komunikace, automatizuje rutinn√≠ ozn√°men√≠ a umo≈æ≈àuje efektivn√≠ ≈ôe≈°en√≠ po≈æadavk≈Ø v r√°mci spr√°vy nemovitost√≠.
